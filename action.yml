name: 'SCS Actions'
description: 'Github action to generate SBOM, SLSA and attestation'
author: 'Pranay'
inputs:
  dummy_ACCOUNT_URL:
    description: 'dummy Account Url'
    required: true
  dummy_ACCOUNT_ID:
    description: 'dummy Account ID'
    required: true
  dummy_ORG_ID:
    description: 'dummy Organization ID'
    required: true
  dummy_PROJECT_ID:
    description: 'dummy Project ID'
    required: true
  dummy_API_KEY:
    description: 'Auth token for authentication with dummy'
    required: true
  TOOL:
    description: 'Tool which needs to be orchestrated (e.g., Syft, Blackduck)'
    required: true
  FORMAT:
    description: 'Format of SBOM to be generated by plugin tool (e.g., SPDX, CYCLONEDX)'
    required: true
  TARGET:
    description: 'Image or repo source'
    required: true
  ATTEST:
    description: 'If attestation is required'
    type: boolean
  KMS_KEY:
    description: 'Kms Key'
    required: false

runs:
  using: 'docker'
  image: 'dummy/scs-plugin:github'
  entrypoint: '/bin/scs-plugin'
  args: 
   - github-orchestrate
  env:
    ACTION_NAME: 'SBOM Generation'
    dummy_ACCOUNT_URL: ${{ inputs.dummy_ACCOUNT_URL }}
    dummy_ACCOUNT_ID: ${{ inputs.dummy_ACCOUNT_ID }}
    dummy_ORG_ID: ${{ inputs.dummy_ORG_ID }}
    dummy_PROJECT_ID: ${{ inputs.dummy_PROJECT_ID }}
    dummy_API_KEY: ${{ inputs.dummy_API_KEY }}
    SBOM_TOOL: ${{ inputs.TOOL }}
    SBOM_FORMAT: ${{ inputs.FORMAT }}
    SBOM_SOURCE: ${{ inputs.TARGET }}
    PLUGIN_TYPE: 'github-orchestrate'
    PLUGIN_MODE: 'generation'
    ATTEST_SBOM: ${{ inputs.ATTEST }}
    KMS_KEY: ${{ inputs.KMS_KEY }}
